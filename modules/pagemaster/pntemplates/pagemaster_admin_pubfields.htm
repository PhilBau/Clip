<!--[* $Id$ *]-->

<!--[include file='pagemaster_admin_header.htm']-->

<!--[pnajaxheader module='pagemaster' filename='pubfieldlist.js' dragdrop=true]-->
<!--[pnpageaddvar name='stylesheet' value='modules/pagemaster/pnstyle/style.css']-->

<div class="z-admincontainer">
	<div class="z-adminpageicon"><!--[pnimg modname='core' src='db_update.gif' set='icons/large' __alt='Manage Publication fields' ]--></div>

	<h2><!--[gt text='Manage Publication fields']--></h2>

	<!--[pmadminsubmenu tid=$tid id=$id|default:'']-->

	<!--[pnmodurl modname='pagemaster' type='admin' func='pubtype' tid=$tid assign='urlupdate']-->
	<div class="z-warningmsg"><!--[gt text='When publication fields are added or changed you need to <a href="%s">Update the DB Table</a>.' tag1=$urlupdate]--></div>

	<h3><!--[gt text='Existing publication fields']--></h3>

	<ol id="pubfieldlist" class="z-itemlist">
		<li id="pubfieldlistheader" class="pubfieldlistheader z-itemheader z-itemsortheader z-clearfix">
			<span class="z-itemcell z-w15"><!--[gt text='Name']--></span>
			<span class="z-itemcell z-w15"><!--[gt text='Title']--></span>
			<span class="z-itemcell z-w20"><!--[gt text='Description']--></span>
			<span class="z-itemcell z-w10"><!--[gt text='Searchable']--></span>
			<span class="z-itemcell z-w10"><!--[gt text='Title field']--></span>
			<span class="z-itemcell z-w10"><!--[gt text='Mandatory']--></span>
			<span class="z-itemcell z-w10"><!--[gt text='Max. Lenght']--></span>
			<span class="z-itemcell z-w10"><!--[gt text='Actions']--></span>
		</li>
		<!--[foreach from=$pubfields item=pubfield name=pubfields]-->
		<li id="pubfield_<!--[$pubfield.id]-->" class="<!--[cycle name='pubfieldlist' values='z-odd,z-even']--> z-sortable z-clearfix z-itemsort">
			<span class="z-w15" id="pubfielddrag_<!--[$pubfield.id]-->">
				<!--[$pubfield.name]-->
			</span>
			<span class="z-w15">
				<!--[$pubfield.title]-->&nbsp;
			</span>
			<span class="z-w20">
				<!--[$pubfield.description|truncate:45]-->&nbsp;
			</span> 
			<span class="z-w10 z-center">
				<!--[if $pubfield.issearchable]-->
					<!--[pnimg modname='core' src='greenled.gif' width='10' height='10' set='icons/extrasmall']-->
				<!--[/if]-->
				&nbsp;
			</span>
			<span class="z-w10 z-center">
				<!--[if $pubfield.istitle]-->
					<!--[pnimg modname='core' src='greenled.gif' width='10' height='10' set='icons/extrasmall']-->
				<!--[/if]-->
				&nbsp;
			</span>
			<span class="z-w10 z-center">
				<!--[if $pubfield.ismandatory]-->
					<!--[pnimg modname='core' src='greenled.gif' width='10' height='10' set='icons/extrasmall']-->
				<!--[/if]-->
				&nbsp;
			</span>
			<span class="z-w10 z-center">
				<!--[if $pubfield.fieldmaxlength]-->
					<!--[$pubfield.fieldmaxlength]-->
				<!--[/if]-->
				&nbsp;
			</span>
			<span class="z-w10">
				<a href="<!--[pnmodurl modname='pagemaster' type='admin' func='pubfields' id=$pubfield.id tid=$pubfield.tid fragment='newpubfield']-->"><!--[pnimg modname='core' src='edit.gif' set='icons/extrasmall']--></a>
			</span>
		</li>
		<!--[foreachelse]-->
		<li class="z-odd z-clearfix z-center"><!--[gt text="This publication type doesn't have fields yet."]--></li>
		<!--[/foreach]-->
	</ol>

	<!--[pnform cssClass='z-form' enctype='application/x-www-form-urlencoded']-->
		<div>
			<!--[pnformvalidationsummary]-->
			<fieldset id="newpubfield">
				<legend><!--[gt text='Add a publication field']--></legend>
				<div class="z-formrow">
					<!--[pnformlabel for='name' text='Name' mandatorysym=true]-->
					<!--[pnformtextinput id='name' maxLength='255' mandatory=true]-->
					<div class="z-formnote"><!--[gt text='Name of this field (is used e.g. in the template variables).']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='title' text='Display name' mandatorysym=true]-->
					<!--[pnformtextinput id='title' maxLength='255' mandatory=true]-->
					<div class="z-formnote"><!--[gt text="Title (is shown e.g. in the automatically generated templates) and can be a custom gettext string."]--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='description' text='Description']-->
					<!--[pnformtextinput id='description' maxLength='255']-->
					<div class="z-formnote"><!--[gt text='Description of this field (used as tooltip on the input form) and can be a custom gettext string.']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='fieldplugin' text='Fieldtype (Plugin)']-->
					<!--[pnformplugintype id='fieldplugin']-->
					<span class="z-formnote"><!--[pnformtextinput id='typedata' maxLength='4000']--></span>
					<div class="z-formnote"><!--[gt text='Which kind of fieldtype is used (can be extended by plugins). Detailed informations about the individual plugins can be found in the documentation.']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='istitle' text='Title field']-->
					<!--[pnformcheckbox id='istitle']-->
					<div class="z-formnote"><!--[gt text='The content of this field will be used as the title?']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='ispageable' text='Pageable']-->
					<!--[pnformcheckbox id='ispageable']-->
					<div class="z-formnote"><!--[gt text='The content of this field is pageable?']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='ismandatory' text='Mandatory']-->
					<!--[pnformcheckbox id='ismandatory']-->
					<div class="z-formnote"><!--[gt text='Is this field mandatory?']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='issearchable' text='Searchable']-->
					<!--[pnformcheckbox id='issearchable']-->
					<div class="z-formnote"><!--[gt text='The content of this field can be searched?']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='fieldmaxlength' text='Max. lenght']-->
					<!--[pnformintinput id='fieldmaxlength' maxLength='15']-->
					<div class="z-formnote"><!--[gt text='The maximum lenght for the content of this field.']--></div>
				</div>
				<div class="z-formrow">
					<!--[pnformlabel for='lineno' text='Line No.']-->
					<!--[pnformintinput id='lineno' maxLength='4']-->
					<div class="z-formnote"><!--[gt text='Number of this field.']--></div>
				</div>
			</fieldset>

			<div class="z-formbuttons">
				<!--[pnformbutton commandName='create' __text='Save']-->
				<!--[pnformbutton commandName='delete' __text='Delete']-->
			</div>
		</div>
	<!--[/pnform]-->
</div>
